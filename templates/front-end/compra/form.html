{% extends 'front-end/base.html' %}
{% load static %}
{% block content %}
    <div class="row">
        <div class="col-xs-12">
            <!-- PAGE CONTENT BEGINS -->
            <div class="space-6"></div>

            <div class="row">
                <div class="col-sm-12">
                    <div class="widget-box transparent">
                        <div class="widget-header widget-header-large">
                            <h3 class="widget-title grey lighter">
                                <i class="ace-icon fa fa-leaf green"></i>
                                Nueva Compra
                            </h3>

                            <div class="widget-toolbar no-border invoice-info">
                                <div class="col-lg-9"></div>
                                <div class="col-lg-3">
                                    <label for="id_comprobante"><span
                                            class="invoice-info-label">Comprobante:</span></label>
                                    <div class="input-group">
                                        <div class="input-group-addon">
                                            #
                                        </div>
                                        <input type="text" name="comprobante" id="id_comprobante">
                                    </div>
                                </div>
                                <br>
                                <div class="col-lg-9"></div>
                                <div class="col-lg-3">
                                    <label for="id_fecha"><span class="invoice-info-label">Fecha:</span></label>
                                    <div class="input-group">
                                        <div class="input-group-addon">
                                            <i class="fa fa-calendar" aria-hidden="true"></i>
                                        </div>
                                        {{ form.fecha }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="widget-body">
                            <div class="widget-main padding-24">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-xs-11 label label-lg label-info arrowed-in arrowed-right">
                                                <b>Datos de la compra</b>
                                            </div>
                                        </div>

                                        <div>
                                            <ul class="list-unstyled spaced">
                                                <li>

                                                    <i class="ace-icon fa fa-caret-right blue"></i><b> Proveedor</b>
                                                    <div class="input-group col-lg-10 col-xl-10 col-xs-10">
                                                        {{ form.proveedor }}
                                                        <div class="input-group-btn">
                                                            <button class="btn btn-white btn-info btn-bold btn-sm"
                                                                    data-toggle="tooltip" data-placement="top"
                                                                    title="agregar proveedor" type="button"
                                                                    id="id_new_prov">
                                                                <i class="ace-icon fa fa-plus-square bigger-120 blue"></i>
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-10 col-xl-10 col-xs-10"></div>
                                                </li>
                                                <br>
                                                <li>
                                                    <i class="ace-icon fa fa-caret-right blue"></i><b> Direccion:</b>
                                                    <br><br>
                                                    <p id="direccion_prov">Sin Direccion</p>
                                                </li>

                                                <li>
                                                    <i class="ace-icon fa fa-caret-right blue"></i><b>Celular:</b>
                                                    <br><br>
                                                    <p id="telefono_prov">09xxxxxxxx</p>
                                                </li>
                                                <li>
                                                    <i class="ace-icon fa fa-caret-right blue"></i><b>Tasa IVA:</b>
                                                    <br>

                                                    <div class="input-group input-group-sm col-xl-10 col-lg-10">
                                                        {{ form.tasa_iva }}
                                                    </div>

                                                </li>
                                            </ul>
                                        </div>
                                    </div><!-- /.col -->

                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-xs-11 label label-lg label-success arrowed-in arrowed-right">
                                                <b>Productos:</b>
                                            </div>
                                        </div>

                                        <div>
                                            <table class="table table-striped table-bordered" id="table_productos">
                                                <thead>
                                                <tr>
                                                    <th>Producto</th>
                                                    <th class="hidden-xs">Categoria</th>
                                                    <th class="hidden-480">Presentacion</th>
                                                    <th>Elegir</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div><!-- /.col -->
                                </div><!-- /.row -->

                                <div class="space"></div>

                                <div class="row">
                                    <div class="col-lg-12 label label-lg label-warning arrowed-in arrowed-right">
                                        <b>Detalle de productos</b>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <a type="button" class="btn btn-lg btn-danger" id="vaciar"><i
                                            class="fa fa-trash"></i> Quitar todo</a>
                                </div>
                                <br>
                                <div>
                                    <div class="row">
                                        <table class="table table-striped table-bordered" id="table_detalle">
                                            <thead>
                                            <tr>
                                                <th>PRODUCTO</th>
                                                <th class="hidden-xs">CATEGORIA</th>
                                                <th class="hidden-480">PRESENTACION</th>
                                                <th>CANTIDAD</th>
                                                <th>PRECIO</th>
                                                <th>SUBTOTAL</th>
                                                <th>X</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="hr hr8 hr-double hr-dotted"></div>

                                <div class="row">
                                    <div class="col-sm-5 pull-right">
                                        <h4 class="pull-right">
                                            Subtotal:
                                            <span class="red" id="sub_gen">$0.00</span>
                                        </h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-5 pull-right">
                                        <h4 class="pull-right">
                                            I.V.A.:
                                            <span class="red" id="iva_gen">$0.00</span>
                                        </h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-5 pull-right">
                                        <h4 class="pull-right">
                                            <b>TOTAL:</b>
                                            <span class="red" id="tot_gen">$0.00</span>
                                        </h4>
                                    </div>
                                </div>

                                <div class="space-6"></div>
                                <div class="well">
                                    Gracias por elegirnos.
                                    Creemos que quedará satisfecho con nuestros servicios.
                                </div>
                                <div class="row">
                                    <a type="button" class="btn btn-white btn-bold btn-lg btn-success" id="save"><i
                                            class="fa fa-floppy-o"></i> Guardar Compra</a>
                                    <a type="button" class="btn btn-white btn-bold btn-lg btn-danger" id="save"><i
                                            class="fa fa-ban"></i>
                                        Cancelar</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- PAGE CONTENT ENDS -->
        </div><!-- /.col -->
    </div>
{% endblock %}
{% block modals %}
    <div class="modal fade" id="modal_person" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <form method="post" id="form_person" enctype="multipart/form-data" action=".">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel"><i class="fa fa-plus"></i>&nbsp;Registro de
                            un Proveedor</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="form-group">
                                {{ formp.as_p }}
                            </div>
                            <div class="form-group">
                                <input type="hidden" value="{{ action }}">
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-floppy-o"></i>&nbsp;Guardar Proveedor
                        </button>
                          <button type="button" class="btn btn-danger" data-dismiss="modal"><i
                                class="fa fa-times"></i> Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
{% endblock %}
{% block extra %}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="{% static "lib/daterangepicker-3.1/spanish.js" %}"></script>
    <script src="{% static "lib/daterangepicker-3.1/daterangepicker.js" %}"></script>
    <link rel="stylesheet" href="{% static 'lib/daterangepicker-3.1/daterangepicker.css' %}">
    <script src="{% static 'assets/js/chosen.jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'assets/js/moment.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script src="{% static 'apps/compra/form.js' %}"></script>
    <script src="{% static 'apps/proveedor/form.js' %}"></script>
    <script> compras.list(); </script>
{% endblock %}
